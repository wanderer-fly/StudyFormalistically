<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <link rel="stylesheet" href="./css/scores.css">
        <link rel="stylesheet" href="./css/topbar.css">
        <title>学习积分</title>
    </head>
    <body>
        <div class="topbar">
            <div class="ret"><span>〈</span></div>
            <div class="study"><span>学习积分</span></div>
            <div class="more" id="morebut"><span><b>⋯</b></span></div>
        </div>
        <div class="fuckbox">
            <span style="font-size: 21px; margin-top: 15px;">成长总积分</span>
            <h1 id="scores">4367</h1>
            <span style="display: flex; flex-direction: row; justify-content: center; align-items: center; height: 20px">
                <p id="text"></p>&nbsp;
                <div id="addstar"></div>
                &nbsp;
                <div class="cert"><b>证书</b></div>
            </span>
            <div class="fuckscores">⚠对违规获取积分的行为处罚说明</div>
            <script>
                document.getElementById("text").innerHTML = "才高八斗"
                var scores = document.getElementById("scores")
                var names = ["一心一意",
                 "再接再厉",
                 "三省吾身",
                 "名扬四海",
                 "学富五车",
                 "六韬三略",
                 "七步才华",
                 "才高八斗",
                 "九天揽月",
                 "深海捉鳖"]
                 setStar()
                function setStar() {
                    document.getElementById("addstar").innerHTML = ""
                    var pos = names.indexOf(document.getElementById('text').textContent)
                    console.log(pos)
                    var stars = 0
                    for (var i = 1; i <= pos + 1; i++) {
                        stars++
                        document.getElementById("addstar").innerHTML += "<div class=\"starlight\"></div>"
                    }
                    for (var i = stars; i < 10; i++) {
                        document.getElementById("addstar").innerHTML += "<div class=\"star\"></div>"
                    }
                }
            </script>
        </div>
        <div class="gift" id="sbgift">
            <img src="./res/gift.jpg">
            <div style="display: flex; flex-direction: column; line-height: 80%; box-sizing: border-box; padding-top: 5px; min-width: max-content;">
                <span style="margin-left: 15px; font-size: 20px; font-family: 宋体;"><b>强国城兑福利</b></span><br>
                <span style="margin-left: 15px; font-size: 15px; font-family: 宋体;">我的点点通250</span>
            </div>
            <div style="display: flex; flex-direction: row; justify-content: end; align-items: center; width: 100%;"><b>〉</b></div>
        </div>
        <div class="settingbox" id="setting">
            <h1>形式主义强国~</h1>
            <input type="text" placeholder="成长总积分" id="total" value="4367">
            <select name="sname" id="sname">
                <option value="default"></option>
                <option value="o0" id="o0">一心一意</option>
                <option value="o1" id="o1">再接再厉</option>
                <option value="o2" id="o2">三省吾身</option>
                <option value="o3" id="o3">名扬四海</option>
                <option value="o4" id="o4">学富五车</option>
                <option value="o5" id="o5">六韬三略</option>
                <option value="o6" id="o6">七步才华</option>
                <option value="o7" id="o7">才高八斗</option>
                <option value="o8" id="o8">九天揽月</option>
                <option value="o9" id="o9">深海捉鳖</option>
            </select>
            <button id="setup">设定</button>
            <script>
                document.getElementById('setup').addEventListener('click', function() {
                    document.getElementById('scores').innerText = document.getElementById('total').value
                    if (document.getElementById('sname').value != 'default') {
                        document.getElementById('text').innerHTML = 
                        document.getElementById(document.getElementById('sname').value).textContent
                        setStar()
                    }
                    document.getElementById('setting').style.display = 'none'
                })
            </script>
        </div>
        <script>
            document.getElementById("morebut").addEventListener('click', function() {
                document.getElementById("setting").style.display = 
                    document.getElementById("setting").style.display === "block" ? "none" : "block"
            })
        </script>
        <div class="scorebox">
            <div class="title">
                <span style="font-family: 宋体; font-size: 22px; justify-self: flex-start; align-items: center;">
                    <b>积分规则</b>
                </span>
                <span style="font-family: 黑体; justify-self: end; align-self: flex-end; position: absolute; right: 10px;">
                    今日已积累
                    <span style="color: rgba(248,48,48); font-family: 宋体; font-size: 22px;">
                        <b id="sum">1</b><b>积分</b>
                    </span>
                </span>
            </div>

            <table>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>登录</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">1分/每日首次登陆<br>每日上限1分</span>
                        <input type="range" class="slider" min="0" max="1" step="1" value="1">
                    </td>
                    <td class="op">
                        <button class="fistatus" style="background: rgba(243,244,246);"><b>已完成</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">1</span>分</span>/1分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>我要选读文章</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">1分/每有效阅读/播报一篇,上限6分<br>1分/有效阅读或播报文章累计1分钟，上限6分<br>每日上限12分</span>
                        <input type="range" class="slider" min="0" max="12" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/12分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>视听学习</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">1分/每有效收听/观看一个<br>每日上限6分</span>
                        <input type="range" class="slider" min="0" max="6" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/6分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>视听学习时长</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">1分/有效收听音频或观看视频累计1分钟<br>每日上限6分</span>
                        <input type="range" class="slider" min="0" max="6" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/6分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>每日答题</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">每组答题每答对1道积1分<br>每日上限5分</span>
                        <input type="range" class="slider" min="0" max="5" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/5分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>专项答题</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">每组答题每答对1道积1分、同组答题不重复积分每日仅可获得一组答题积分<br>每日上限1组</span>
                        <input type="range" class="slider" min="0" max="5" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/5分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>挑战答题</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">每次答对5道及以上积5分<br>每日上限5分</span>
                        <input type="range" class="slider" min="0" max="5" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/5分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>四人赛</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">首局第一名积3分，第二、三名积2分，第四名积1分；<br>每日上限5分</span>
                        <input type="range" class="slider" min="0" max="5" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/5分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>双人对战</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">首局胜利积2分，失败积1分<br>每日仅首局得分<br>每日上限2分</span>
                        <input type="range" class="slider" min="0" max="2" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/2分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>订阅</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">1分/订阅一个强国号或学习平台，重复订阅无效<br>每日上限2分</span>
                        <input type="range" class="slider" min="0" max="2" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/2分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>发表观点</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">1分/每发表一个有效观点<br>每日上限1分</span>
                        <input type="range" class="slider" min="0" max="1" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/1分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>本地频道</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">1分/打开使用本地频道内功能<br>每日上限1分</span>
                        <input type="range" class="slider" min="0" max="1" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/1分</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="task">
                        <span style="font-family: 宋体; font-size: 20px;"><b>强国运动</b></span>
                        <span style="margin-top: 5px; color: rgba(143,143,143); font-size: 14px;">l分/每周每累积5000步<br>每周上限2分</span>
                        <input type="range" class="slider" min="0" max="2" step="1" value="0">
                    </td>
                    <td class="op">
                        <button class="fistatus"><b>去看看</b></button>
                        <div class="sc">
                            <span class="f"><span class="redfont"><span class="value">0</span>分</span>/2分</span>
                        </div>
                    </td>
                </tr>
                <script>
                    const sliders = document.querySelectorAll('.slider');
                    const values = document.querySelectorAll('.value');
                    const buttons = document.querySelectorAll('.fistatus')
                    const sumElement = document.getElementById('sum');
                    //按钮
                    buttons.forEach((button, index) => {
                        button.addEventListener('click', function() {
                            console.log(button.textContent)
                            if (button.textContent === "已完成") {
                                sliders[index].value = 0
                                // values[index].textContent = parseInt(sliders[index].value);
                                button.innerHTML = "<b>去看看</b>"
                                buttons[index].style.backgroundColor = "rgba(254,247,237)"
                            } else if (button.textContent === "去看看") {
                                sliders[index].value = sliders[index].max
                                // values[index].textContent = parseInt(sliders[index].value);
                                buttons[index].innerHTML = "<b>已完成</b>"
                                buttons[index].style.backgroundColor = "rgba(243,244,246)"
                            }
                            values[index].textContent = parseInt(sliders[index].value);
                            calculateSum();
                        })
                    })
 
                    // 滑动条
                    sliders.forEach((slider, index) => {
                        slider.addEventListener('input', function() {
                            const value = slider.value;
                            values[index].textContent = parseInt(value);
                            var prop = sliders[index].max
                            console.log(index)
                            if (value === prop) {
                                buttons[index].innerHTML = "<b>已完成</b>"
                                buttons[index].style.backgroundColor = "rgba(243,244,246)"
                            } else {
                                buttons[index].innerHTML = "<b>去看看</b>"
                                buttons[index].style.backgroundColor = "rgba(254,247,237)"
                            }
                            calculateSum();
                        });
                    });
    
                    function calculateSum() {
                        let sum = 0;
                        values.forEach(value => {
                          sum += parseInt(value.textContent);
                        });
                        sumElement.textContent = sum;
                        var sc = parseInt(document.getElementById('scores').textContent)
                        sc = parseInt(document.getElementById('total').value) + sum
                        document.getElementById('scores').textContent = sc
                    }

                    document.getElementById('sbgift').addEventListener('click', function() {
                        sliders.forEach((slider, index) => {
                            if (index <= 7) {
                                slider.value = slider.max
                                const value = slider.value;
                                values[index].textContent = parseInt(value);
                                var prop = sliders[index].max
                                console.log(index)
                                if (value === prop) {
                                    buttons[index].innerHTML = "<b>已完成</b>"
                                    buttons[index].style.backgroundColor = "rgba(243,244,246)"
                                } else {
                                    buttons[index].innerHTML = "<b>去看看</b>"
                                    buttons[index].style.backgroundColor = "rgba(254,247,237)"
                                }
                                calculateSum()
                            }
                            
                        })
                    })
                </script>
            </table>
        </div>
    </body>
</html>